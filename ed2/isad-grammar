file: hline* group*

hline: id = num ;

group: %bitfields bitfield*
group: %parts part*
group: %modifiers modifier*
group: %prefixes prefix*
group: %operands operand*
group: %instructions instruction*
group: %forms form*


varcmask: -
varcmask: hex
varcmask: hex / hex
varcmask: hex - hex
varcmask: hex - hex / hex

varcopts: [ opt ]
varcopts: [ opt : ]
varcopts: [ opt : opt ]
varcopts: [ : opt ]
varcopts: [ opt - ]
varcopts: [ opt - opt ]
varcopts: [ - opt ]

varchoice: varcmask varcopts* :

varbf: [ bfspec ]
varbf: [ id.part ]
varbf:

bfset: [ id.part <- bfspec ]
bfset: [ <- bfspec ]


bitfield: id.bf = bfspec ;

bfspec: bfmod+
bfspec: id.bf

lbfspec: bfspec
lbfspec: id.part
lbfspec: :

bfmod: sbf
bfmod: << num
bfmod: S
bfmod: SS
bfmod: US
bfmod: + num
bfmod: PCREL
bfmod: PCREL ( pcrelmod* )
bfmod: W

pcrelmod: + num
pcrelmod: & num

sbf: num
sbf: num : num
sbf: id.part : num
sbf: id.part : num : num


part: id.part ;


modifier: id.mod = moddesc ;

modvar: varchoice moddesc ,

moddesc: varbf { modvar* }
moddesc: bfset moddesc
moddesc: id.mod
moddesc: -
moddesc: mname*


operand: id.oper = operdesc ;

opervar: varchoice operdesc ,

operdesc: varbf { opervar* }
operdesc: bfset operdesc
operdesc: id.mod operdesc
operdesc: shortoper

shortoper: shortoper | sumoper
shortoper: sumoper

sumoper: sumoper + atomoper
sumoper: sumoper + atomoper * num
sumoper: sumoper + atomoper << num
sumoper: atomoper

atomoper: regname
atomoper: regname ( regmod* )
atomoper: regname ( lbfspec regmod* )
atomoper: IMM ( lbfspec immmod* )
atomoper: MEM ( memname , operdesc )
atomoper: MEM ( memname lbfspec , operdesc )
atomoper: MEM ( operdesc )
atomoper: #
atomoper: num
atomoper: [ atomoper ]
atomoper: id.oper
atomoper: (iname insnmod* shortoper*)
atomoper: id.insn
atomoper: cname
atomoper: cname ( immod* )
atomoper: atomoper . ( MASK num bfspec swzmod* )
atomoper: atomoper . ( SWZ num num bfspec swzmod* )
atomoper: atomoper .swzspec

swzmod: BE
swzmod: LE
swzmod: XYZW

regmod: C
regmod: UNK
regmod: HL

immmod: C
immmod: UNK
immmod: BT
immmod: CT


prefix: id.pref = prefdesc;

prefvar: varchoice prefdesc ,

prefdesc: varbf { prefvar* }
prefdesc: bfset prefdesc
prefdesc: id.pref
prefdesc: pname operspec
prefdesc: pname 
prefdesc: UNK operspec
prefdesc: UNK
prefdesc: operspec


instruction: id.insn = insndesc ;

insnvar: varchoice insndesc ,

insndesc: varbf { insnvar* }
insndesc: bfset insndesc
insndesc: id.insn
insndesc: id.pref* iname insnmod* shortoper*
insndesc: id.pref* UNK insnmod* shortoper*
insndesc: insndesc & insndesc
insndesc: -

insnmod: id.mod
insnmod: mname


form: id.form = formdesc ;

formvar: varchoice formdesc ,

formdesc: varbf { formvar* }
formdesc: oplen insns
formdesc: id.form
formdesc: bfset formdesc

oplen: num
oplen: num / num

insns: insndesc
insns: insns & insndesc
